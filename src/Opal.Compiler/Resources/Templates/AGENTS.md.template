<!-- BEGIN OPALC SECTION - DO NOT EDIT -->
## OPAL-First Project

This is an **OPAL-first project**. All new code MUST be written in OPAL. Existing C# files should be converted to OPAL before modification.

### MANDATORY Rules for AI Agents

**Rule 1: Never create new `.cs` files**
- All new code MUST be written in OPAL (`.opal` files)
- OPAL files compile automatically during `dotnet build`
- Use the `$opal` skill for syntax assistance

**Rule 2: Convert C# to OPAL before modifying**
- Before modifying ANY `.cs` file, convert it to OPAL first using `$opal-convert`
- Make your changes in the new `.opal` file, not the original `.cs` file
- Delete the original `.cs` file after successful conversion
- Run `opalc analyze <file.cs>` to understand the file's complexity before conversion

**Rule 3: Never edit generated files**
- Files ending in `.g.cs` are auto-generated from OPAL - do not edit them
- If you need to change generated output, edit the source `.opal` file instead

### Workflow for Any Code Change

1. **New feature/file?** → Create `.opal` file using `$opal` skill
2. **Modify existing `.opal` file?** → Edit the `.opal` file directly
3. **Modify existing `.cs` file?** → Convert to `.opal` first, then make changes

### File Types
- `.opal` - OPAL source files (**use this for all code**)
- `.g.cs` - Generated C# files (never edit)
- `.cs` - Legacy C# files (**convert to OPAL before modifying**)

#### Available Skills
- `$opal` - Write OPAL code with v2+ syntax
- `$opal-convert` - Convert C# to OPAL

#### Key Commands
```bash
opalc analyze <path>                 # Score files for OPAL migration potential
opalc --input file.opal -o file.g.cs # Compile OPAL to C#
opalc convert file.cs                # Convert C# to OPAL
opalc convert file.opal              # Convert OPAL to C#
```

#### OPAL v2+ Syntax Highlights
- Lisp-style expressions: `(+ a b)`, `(== x 0)`, `(% i 15)`
- Arrow conditionals: `§IF[id] condition → action`
- Contracts: `§Q (> x 0)` (precondition), `§S (>= result 0)` (postcondition)
- Effects: `§E[db,net,cw]` (database, network, console write)
- Print shorthand: `§P "message"`
- Variable binding: `§B[name] expr`
- Return: `§R expr`

#### Type Mappings
| C# | OPAL |
|---|---|
| `int` | `i32` |
| `long` | `i64` |
| `string` | `str` |
| `bool` | `bool` |
| `void` | `void` |

#### Enforcement Note
OPAL-first enforcement in Codex is **guidance-based only**. Unlike Claude Code which uses hooks to block `.cs` creation, Codex relies on following these instructions. Please review file extensions after generation.

*Generated by opalc v{{VERSION}}*
<!-- END OPALC SECTION -->
