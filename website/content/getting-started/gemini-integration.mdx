---
title: "Gemini Integration"
section: "getting-started"
order: 5
---

# Using OPAL with Google Gemini CLI

This guide explains how to use OPAL with Google Gemini CLI. For other AI integrations, see [Claude Integration](/getting-started/claude-integration/) or [Codex Integration](/getting-started/codex-integration/).

---

## Quick Setup

Initialize your project for Gemini CLI with a single command:

```bash
opalc init --ai gemini
```

This creates:

| File | Purpose |
|:-----|:--------|
| `.gemini/skills/opal/SKILL.md` | Teaches Gemini OPAL v2+ syntax |
| `.gemini/skills/opal-convert/SKILL.md` | Teaches Gemini C# to OPAL conversion |
| `.gemini/settings.json` | **Hook configuration** - enforces OPAL-first development |
| `GEMINI.md` | Project documentation with OPAL-first guidelines |

---

## OPAL-First Enforcement

Unlike Codex CLI, **Gemini CLI supports hooks** (as of v0.26.0+). This means OPAL-first development is **enforced**, not just guided.

When Gemini tries to create a `.cs` file, the hook blocks the operation and returns:

```json
{
  "decision": "deny",
  "reason": "BLOCKED: Cannot create C# file 'MyClass.cs'",
  "systemMessage": "This is an OPAL-first project. Create an .opal file instead..."
}
```

Gemini will then automatically retry with an `.opal` file.

---

## Available Skills

### The `@opal` Skill

Use `@opal` to activate OPAL-aware code generation:

```
@opal

Write a function that calculates factorial with:
- Precondition: n >= 0
- Postcondition: result >= 1
```

### The `@opal-convert` Skill

Use `@opal-convert` to convert existing C# code to OPAL:

```
@opal-convert

Convert this C# class to OPAL:

public class Calculator
{
    public int Add(int a, int b) => a + b;
}
```

---

## Gemini vs Claude Code vs Codex

| Feature | Claude Code | Gemini CLI | Codex CLI |
|:--------|:------------|:-----------|:----------|
| Skills directory | `.claude/skills/` | `.gemini/skills/<name>/` | `.codex/skills/<name>/` |
| Project instructions | `CLAUDE.md` | `GEMINI.md` | `AGENTS.md` |
| Skill invocation | `/opal` | `@opal` | `$opal` |
| Enforcement | **Hooks (enforced)** | **Hooks (enforced)** | Guidance only |
| Hook mechanism | `PreToolUse` | `BeforeTool` | N/A |

---

## Best Practices

1. **Trust the enforcement** - Gemini CLI will block `.cs` creation
2. **Use explicit instructions** - Be specific about contracts and effects
3. **Start with skill reference** - Begin prompts with `@opal` or `@opal-convert`
4. **Review contracts** - Verify generated contracts match your requirements

---

## Troubleshooting

### Hook Not Blocking Files

Verify the settings file exists:

```bash
cat .gemini/settings.json
```

It should contain the `BeforeTool` hook configuration with `opalc hook validate-write --format gemini`.

### opalc Not Found

Ensure the OPAL compiler is installed:

```bash
dotnet tool install -g opalc
export PATH="$PATH:$HOME/.dotnet/tools"
```

---

## See Also

- [Syntax Reference](/syntax-reference/) - Complete language reference
- [opalc init](/cli/init/) - Full init command documentation
- [Claude Integration](/getting-started/claude-integration/) - Alternative with Claude Code
- [Codex Integration](/getting-started/codex-integration/) - Alternative with OpenAI Codex CLI
