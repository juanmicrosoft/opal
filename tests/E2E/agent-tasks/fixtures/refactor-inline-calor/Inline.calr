§M{m001:InlineExamples}

// Simple helper function to inline
§F{f001:Double:pub}
  §I{i32:x}
  §O{i32}
  §R (* x 2)
§/F{f001}

// Function that calls Double - target for inlining
§F{f002:Calculate:pub}
  §I{i32:a}
  §I{i32:b}
  §O{i32}
  §R (+ §C{Double}
        §A a
      §/C
      §C{Double}
        §A b
      §/C)
§/F{f002}

// Function with contracts to inline
§F{f003:Clamp:pub}
  §I{i32:value}
  §I{i32:min}
  §I{i32:max}
  §O{i32}
  §Q (<= min max)
  §S (>= result min)
  §S (<= result max)
  §R (? (< value min) min (? (> value max) max value))
§/F{f003}

// Function that uses Clamp - test contract propagation on inline
§F{f004:NormalizeScore:pub}
  §I{i32:score}
  §O{i32}
  §S (>= result 0)
  §S (<= result 100)
  §R §C{Clamp}
      §A score
      §A 0
      §A 100
    §/C
§/F{f004}

// Function called at multiple sites
§F{f005:Square:pub}
  §I{i32:n}
  §O{i32}
  §S (>= result 0)
  §R (* n n)
§/F{f005}

// Uses Square multiple times - test multi-site inlining
§F{f006:SumOfSquares:pub}
  §I{i32:x}
  §I{i32:y}
  §O{i32}
  §S (>= result 0)
  §R (+ §C{Square}
        §A x
      §/C
      §C{Square}
        §A y
      §/C)
§/F{f006}

§/M{m001}
